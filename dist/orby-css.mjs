function a(a){return a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function n(n){var s=[],i=[],f={selector:n=a(n),children:s,type:"selector",properties:i},h=n.match(/^\@(\w+) (.+)/);return h?{selector:h[0],type:h[1],value:h[2],children:s,properties:i}:(f.selectors=function(n){n=a(n);for(var s,i="",f=0,h=[],m=[],v=0;v<n.length;v++){var p=n[v];"("===p?f++?i+=p:(m=[],s=i,i=""):")"===p?--f?i+=p:(m.push(i),h.push({name:s,args:m}),i="",m=[]):","===p?(i&&(f?m.push(i):h.push({name:i})),i=""):i+=p}return i&&h.push({name:i,args:m}),h}(f.selector),f)}function s(i){var f,h,m="",v=0,p=[],c=0,g=0,o=[];i=a(i).replace(/([^\:]+):([^\;]+){0,1}}/g,"$1:$2;}");for(var j=0;j<i.length;j++)if(f=i[j],"\\"!==i[j-1])if(c||g)m+=f,"'"!==f&&'"'!==f||("'"===f?c=!1:g=!1);else switch(f){case";":if(/\{/.test(m))m+=f;else{var y=(m=a(m)).match(/^([\w\<\-]+)(?:\s*):(.+)/)||[],d=y[1],k=y[2];d&&k?h.properties.push({index:d,value:a(k)}):m&&p.push(n(m)),m=""}break;case"{":v++?m+=f:(h=n(m),p.push(h),m="");break;case"}":if(--v)o.push(m+=f);else{for(var E=[],O=0;O<o.length;O++)E=E.concat(s(o[O]));h.children=E,o=[]}m="";break;case"'":c=!0,m+=f;break;case'"':g=!0,m+=f;break;default:m+=f}else m+=f;return p}function i(a,n){var s={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&-1===n.indexOf(i)&&(s[i]=a[i]);return s}var f={index:0},h="css-",m=/<<id>>/g,v=/<<(?:\:){0,1}(\d+)>>(\;){0,1}/g,p=/^animation(-name){0,1}$/,c="<<id>>";function g(a){for(var n=[],s=[],f=0;f<a.length;f++){for(var h=a[f],m=h.properties,c=i(h,["properties"]),o=m.length,j=[],y=[],d=0;d<o;d++){var k=m[d],E=k.value,O=k.index;v.test(E)||p.test(O)?j.push({value:E,index:O}):y.push({value:E,index:O})}if(o)j.length&&n.push(Object.assign({},c,{properties:j})),y.length&&s.push(Object.assign({},c,{properties:y}));else switch(c.type){case"media":case"supports":var w=g(c.children);n=n.concat(Object.assign({},c,{properties:[],children:w.locals})),s=s.concat(Object.assign({},c,{properties:[],children:w.globals}));break;default:s.push(Object.assign({},c,{properties:[]}))}}return{globals:s,locals:n}}function o(a,n,s,i,f){if(!i){var h=g(a);a=h.locals.concat(h.globals)}if(a=a.map(function(a){switch(a.type){case"keyframes":return"@keyframes "+n+"-"+a.value+"{"+o(a.children,"","",!0,!0)+"}";case"media":return"@media "+a.value+"{"+o(a.children,n,s,!0)+"}";case"selector":return a.selectors.map(function(a){var i=a.name;return/:host/.test(a.name)?a.args.length&&(i=a.args.map(function(n){return""+a.name+n}).join(",")):/:global/.test(a.name)?i=a.args.join(","):f||(i=":host "+a.name+(a.args.length>0?"("+a.args+")":"")),i.replace(/:host/g,s+n)}).join(",")+"{"+a.properties.map(function(a){var s=a.index,i=a.value;return p.test(s)&&(i=i.replace(/(\s*)/,n+"-$1")),s+":"+i}).join(";")+"}";case"import":return a.selector+";";default:return""}}),!i){var m="",c="";return a.forEach(function(a){v.test(a)?c+=a:m+=a}),{globals:m,locals:c}}return a.join("")}function j(a){return function(n,i){void 0===i&&(i=[]);var p,g,j="function"==typeof n;switch(n){case"a":p=HTMLLinkElement;break;case"svg":p=SVGElement;break;case"img":p=HTMLImageElement;break;case"button":p=HTMLButtonElement;break;case"input":p=HTMLInputElement;break;default:p=HTMLElement}g=p.prototype;var y=document.createElement("style");return y.dataset.orby="css",document.head.appendChild(y),function(p){for(var d=[],k=arguments.length-1;k-- >0;)d[k]=arguments[k+1];var E=h+ ++f.index,O=0,w=o(s(p=p.map(function(a,n){return a+="function"==typeof d[n]?/\:(\s+)$/.test(a)?"<<"+n+">>":"<<:"+n+">>;":d[n]||""}).join("")),c,"."),x=w.locals;return y.innerHTML=w.globals.replace(m,E),function(s,f){var h=E+"-"+O++,p=x.replace(/animation(-name){0,1}(\s*):(\s*)<<id>>/g,function(a){return a.replace(m,E)}).replace(m,h).replace(v,function(a,n,i){return d[n](s,f)+(i||"")}),c={class:E+" "+h+" "+(s.class||"")};for(var o in s)(j||o in g||"function"==typeof s[o]||i.indexOf(o)>-1)&&(c[o]=s[o]);return a.apply(void 0,[n,c,a("style",{},p)].concat(s.children))}}}}export{f as current,g as optimizeRules,o as rulesToCss,j as create,s as parse};
//# sourceMappingURL=orby-css.mjs.map
