!function(a,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(a["@orby/css"]={})}(this,function(a){function n(a){return a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function s(a){var s=[],i=[],f={selector:a=n(a),children:s,type:"selector",properties:i},h=a.match(/^\@(\w+) (.+)/);return h?{selector:h[0],type:h[1],value:h[2],children:s,properties:i}:(f.selectors=function(a){a=n(a);for(var s,i="",f=0,h=[],m=[],p=0;p<a.length;p++){var o=a[p];"("===o?f++?i+=o:(m=[],s=i,i=""):")"===o?--f?i+=o:(m.push(i),h.push({name:s,args:m}),i="",m=[]):","===o?(i&&(f?m.push(i):h.push({name:i})),i=""):i+=o}return i&&h.push({name:i,args:m}),h}(f.selector),f)}function i(a){var f,h,m="",p=0,o=[],c=0,v=0,d=[];a=n(a).replace(/([^\:]+):([^\;]+){0,1}}/g,"$1:$2;}");for(var g=0;g<a.length;g++)if(f=a[g],"\\"!==a[g-1])if(c||v)m+=f,"'"!==f&&'"'!==f||("'"===f?c=!1:v=!1);else switch(f){case";":if(/\{/.test(m))m+=f;else{var y=(m=n(m)).match(/^([\w\<\-]+)(?:\s*):(.+)/)||[],j=y[1],k=y[2];j&&k?h.properties.push({index:j,value:n(k)}):m&&o.push(s(m)),m=""}break;case"{":p++?m+=f:(h=s(m),o.push(h),m="");break;case"}":if(--p)d.push(m+=f);else{for(var E=[],O=0;O<d.length;O++)E=E.concat(i(d[O]));h.children=E,d=[]}m="";break;case"'":c=!0,m+=f;break;case'"':v=!0,m+=f;break;default:m+=f}else m+=f;return o}function f(a,n){var s={};for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&-1===n.indexOf(i)&&(s[i]=a[i]);return s}var h=new Map,m="css-",p=/<<id>>/g,o=/<<(?:\:){0,1}(\d+)>>(\;){0,1}/g,c=/^animation(-name){0,1}$/,v="<<id>>";function d(a){for(var n=[],s=[],i=0;i<a.length;i++){for(var h=a[i],m=h.properties,p=f(h,["properties"]),v=m.length,g=[],y=[],j=0;j<v;j++){var k=m[j],E=k.value,O=k.index;o.test(E)||c.test(O)?g.push({value:E,index:O}):y.push({value:E,index:O})}if(v)g.length&&n.push(Object.assign({},p,{properties:g})),y.length&&s.push(Object.assign({},p,{properties:y}));else switch(p.type){case"media":case"supports":var w=d(p.children);n=n.concat(Object.assign({},p,{properties:[],children:w.locals})),s=s.concat(Object.assign({},p,{properties:[],children:w.globals}));break;default:s.push(Object.assign({},p,{properties:[]}))}}return{globals:s,locals:n}}function g(a,n,s,i){if(!i){var f=d(a);a=f.locals.concat(f.globals)}if(a=a.map(function(a){switch(a.type){case"keyframes":return"@keyframes "+n+"-"+a.value+"{"+g(a.children,"","",!0)+"}";case"media":return"@media "+a.value+"{"+g(a.children,n,s,!0)+"}";case"selector":return a.selectors.map(function(a){var i=a.name;return/:host/.test(a.name)&&a.args.length&&(i=a.args.map(function(n){return""+a.name+n}).join(",")),/:global/.test(a.name)&&(i=a.args.join(",")),i.replace(/:host/g,s+n)}).join(",")+"{"+a.properties.map(function(a){var s=a.index,i=a.value;return c.test(s)&&(i=i.replace(/(\s*)/,n+"-$1")),s+":"+i}).join(";")+"}";case"import":return a.selector+";";default:return""}}),!i){var h="",m="";return a.forEach(function(a){o.test(a)?m+=a:h+=a}),{globals:h,locals:m}}return a.join("")}a.Styles=h,a.optimizeRules=d,a.rulesToCss=g,a.create=function(a){return function n(s,f){void 0===f&&(f=[]);var c,d,y="function"==typeof s,j=function(a){var n,s=h.get(a);return s||(s={id:h.size,style:(n=document.createElement("style"),document.head.appendChild(n),n),set:function(a){this.style.innerHTML=a}},h.set(a,s)),s}(n);switch(s){case"a":c=HTMLLinkElement;break;case"svg":c=SVGElement;break;case"img":c=HTMLImageElement;break;case"button":c=HTMLButtonElement;break;case"input":c=HTMLInputElement;break;default:c=HTMLElement}return d=c.prototype,function(n){for(var h=[],c=arguments.length-1;c-- >0;)h[c]=arguments[c+1];var k=m+j.id,E=0,O=g(i(n=n.map(function(a,n){return a+="function"==typeof h[n]?/\:(\s+)$/.test(a)?"<<"+n+">>":"<<:"+n+">>;":h[n]||""}).join("")),v,"."),w=O.globals,M=O.locals;return console.log(j),j.set(w.replace(p,k)),function(n,i,m){var c=k+"-"+E++,v=M.replace(/animation(-name){0,1}(\s*):(\s*)<<id>>/g,function(a){return a.replace(p,k)}).replace(p,c).replace(o,function(a,s,f){return h[s](n,m||i,{idGlobal:k,idLocal:c})+(f||"")}),g={class:k+" "+c+" "+(n.class||"")};for(var j in n)(y||j in d||"function"==typeof n[j]||f.indexOf(j)>-1)&&(g[j]=n[j]);return a.apply(void 0,[s,g,a("style",{},v)].concat(n.children))}}}},a.parse=i});
//# sourceMappingURL=orby-css.umd.js.map
