!function(a,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):a["@orby/css"]=n()}(this,function(){function a(a){return a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function n(n){var i=[],f=[],s={selector:n=a(n),children:i,type:"selector",properties:f},h=n.match(/^\@(\w+) (.+)/);return h?{selector:h[0],type:h[1],value:h[2],children:i,properties:f}:(s.selectors=function(n){n=a(n);for(var i,f="",s=0,h=[],m=[],v=0;v<n.length;v++){var c=n[v];"("===c?s++?f+=c:(m=[],i=f,f=""):")"===c?--s?f+=c:(m.push(f),h.push({name:i,args:m}),f="",m=[]):","===c?(f&&(s?m.push(f):h.push({name:f})),f=""):f+=c}return f&&h.push({name:f,args:m}),h}(s.selector),s)}function i(a,n){var i={};for(var f in a)Object.prototype.hasOwnProperty.call(a,f)&&-1===n.indexOf(f)&&(i[f]=a[f]);return i}var f=0,s="css-",h=/<<id>>/g,m=/<<(?:\:){0,1}(\d+)>>(\;){0,1}/g,v=/^animation(-name){0,1}$/,c="<<id>>";function o(a,n,f,s){if(!s){var h=function a(n){for(var f=[],s=[],h=0;h<n.length;h++){for(var c=n[h],o=c.properties,p=i(c,["properties"]),d=o.length,y=[],g=[],j=0;j<d;j++){var O=o[j],w=O.value,F=O.index;m.test(w)||v.test(F)?y.push({value:w,index:F}):g.push({value:w,index:F})}if(d)y.length&&f.push(Object.assign({},p,{properties:y})),g.length&&s.push(Object.assign({},p,{properties:g}));else switch(p.type){case"media":case"supports":var x=a(p.children);f=f.concat(Object.assign({},p,{properties:[],children:x.locals})),s=s.concat(Object.assign({},p,{properties:[],children:x.globals}));break;default:s.push(Object.assign({},p,{properties:[]}))}}return{globals:s,locals:f}}(a);a=h.locals.concat(h.globals)}if(a=a.map(function(a){switch(a.type){case"keyframes":return"@keyframes "+n+"-"+a.value+"{"+o(a.children,"","",!0)+"}";case"media":return"@media "+a.value+"{"+o(a.children,n,f,!0)+"}";case"selector":return a.selectors.map(function(a){var i=a.name;return/:host/.test(a.name)&&a.args.length&&(i=a.args.map(function(n){return""+a.name+n}).join(",")),/:global/.test(a.name)&&(i=a.args.join(",")),i.replace(/:host/g,f+n)}).join(",")+"{"+a.properties.map(function(a){var i=a.index,f=a.value;return v.test(i)&&(f=f.replace(/(\s*)/,n+"-$1")),i+":"+f}).join(";")+"}";case"import":return a.selector+";";default:return""}}),!s){var c="",p="";return a.forEach(function(a){m.test(a)?p+=a:c+=a}),{globals:c,locals:p}}return a.join("")}return function(i){return function(v,p){void 0===p&&(p=[]);var d="function"==typeof v,y=d?{}:document.createElement(v);return function(g){for(var j=[],O=arguments.length-1;O-- >0;)j[O]=arguments[O+1];var w=s+f++,F=0,x=o(function i(f){var s,h,m="",v=0,c=[],o=0,p=0,d=[];f=a(f).replace(/([^\:]+):([^\;]+){0,1}}/g,"$1:$2;}");for(var y=0;y<f.length;y++)if(s=f[y],"\\"!==f[y-1])if(o||p)m+=s,"'"!==s&&'"'!==s||("'"===s?o=!1:p=!1);else switch(s){case";":if(/\{/.test(m))m+=s;else{var g=(m=a(m)).match(/^([\w\<\-]+)(?:\s*):(.+)/)||[],j=g[1],O=g[2];j&&O?h.properties.push({index:j,value:a(O)}):m&&c.push(n(m)),m=""}break;case"{":v++?m+=s:(h=n(m),c.push(h),m="");break;case"}":if(--v)d.push(m+=s);else{for(var w=[],F=0;F<d.length;F++)w=w.concat(i(d[F]));h.children=w,d=[]}m="";break;case"'":o=!0,m+=s;break;case'"':p=!0,m+=s;break;default:m+=s}else m+=s;return c}(g=g.map(function(a,n){return a+="function"==typeof j[n]?/\:(\s+)$/.test(a)?"<<"+n+">>":"<<:"+n+">>;":j[n]||""}).join("")),c,"."),E=x.locals;return function(a,n){var i=document.querySelector("style."+a);i||((i=document.createElement("style")).className=a,document.head.append(i)),i.innerHTML=n.replace(h,a)}(w,x.globals),function(a,n,f){var s=w+"-"+F++,c=E.replace(/animation(-name){0,1}(\s*):(\s*)<<id>>/g,function(a){return a.replace(h,w)}).replace(h,s).replace(m,function(i,h,m){return j[h](a,f||n,{idGlobal:w,idLocal:s})+(m||"")}),o={class:w+" "+s+" "+(a.class||"")};for(var g in a)(d||g in y||"function"==typeof a[g]||p.indexOf(g)>-1)&&(o[g]=a[g]);return i.apply(void 0,[v,o,i("style",{},c)].concat(a.children))}}}}});
//# sourceMappingURL=orby-css.umd.js.map
