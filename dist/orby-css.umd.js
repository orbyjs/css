!function(a,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):a["@orby/css"]=n()}(this,function(){function a(a){return a.trim?a.trim():a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function n(n){var i=[],s=[],f={selector:n=a(n),children:i,type:"selector",properties:s},m=n.match(/^\@(\w+) (.+)/);return m?{selector:m[0],type:m[1],value:m[2],children:i,properties:s}:(f.selectors=function(n){n=a(n);for(var i,s="",f=0,m=[],h=[],c=0;c<n.length;c++){var o=n[c];"("===o?f++?s+=o:(h=[],i=s,s=""):")"===o?--f?s+=o:(h.push(s),m.push({name:i,args:h}),s="",h=[]):","===o?(s&&(f?h.push(s):m.push({name:s})),s=""):s+=o}return s&&m.push({name:s,args:h}),m}(f.selector),f)}function i(a,n){var i={};for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&-1===n.indexOf(s)&&(i[s]=a[s]);return i}var s="orby-css",f=0,m="css-",h=/<<id>>/g,c=/<<(?:\:){0,1}(\d+)>>(\;){0,1}/g,o=/^animation(-name){0,1}$/,p="<<id>>";function v(a,n,s,f){if(!f){var m=function a(n){for(var s=[],f=[],m=0;m<n.length;m++){for(var h=n[m],p=h.properties,v=i(h,["properties"]),d=p.length,y=[],g=[],j=0;j<d;j++){var k=p[j],E=k.value,O=k.index;c.test(E)||o.test(O)?y.push({value:E,index:O}):g.push({value:E,index:O})}if(d)y.length&&s.push(Object.assign({},v,{properties:y})),g.length&&f.push(Object.assign({},v,{properties:g}));else switch(v.type){case"media":case"supports":var w=a(v.children);s=s.concat(Object.assign({},v,{properties:[],children:w.locals})),f=f.concat(Object.assign({},v,{properties:[],children:w.globals}));break;default:f.push(Object.assign({},v,{properties:[]}))}}return{globals:f,locals:s}}(a);a=m.locals.concat(m.globals)}if(a=a.map(function(a){switch(a.type){case"keyframes":return"@keyframes "+n+"-"+a.value+"{"+v(a.children,"","",!0)+"}";case"media":return"@media "+a.value+"{"+v(a.children,n,s,!0)+"}";case"selector":return a.selectors.map(function(a){var i=a.name;return/:host/.test(a.name)&&a.args.length&&(i=a.args.map(function(n){return""+a.name+n}).join(",")),/:global/.test(a.name)&&(i=a.args.join(",")),i.replace(/:host/g,s+n)}).join(",")+"{"+a.properties.map(function(a){var i=a.index,s=a.value;return o.test(i)&&(s=s.replace(/(\s*)/,n+"-$1")),i+":"+s}).join(";")+"}";case"import":return a.selector+";";default:return""}}),!f){var h="",p="";return a.forEach(function(a){c.test(a)?p+=a:h+=a}),{globals:h,locals:p}}return a.join("")}return function(i){return function(o,d){void 0===d&&(d=[]);var y,g,j="function"==typeof o;switch(o){case"a":y=HTMLLinkElement;break;case"svg":y=SVGElement;break;case"img":y=HTMLImageElement;break;case"button":y=HTMLButtonElement;break;case"input":y=HTMLInputElement;break;default:y=HTMLElement}return g=y.prototype,function(y){for(var k=[],E=arguments.length-1;E-- >0;)k[E]=arguments[E+1];var O=m+f++,w=0,x=v(function i(s){var f,m,h="",c=0,o=[],p=0,v=0,d=[];s=a(s).replace(/([^\:]+):([^\;]+){0,1}}/g,"$1:$2;}");for(var y=0;y<s.length;y++)if(f=s[y],"\\"!==s[y-1])if(p||v)h+=f,"'"!==f&&'"'!==f||("'"===f?p=!1:v=!1);else switch(f){case";":if(/\{/.test(h))h+=f;else{var g=(h=a(h)).match(/^([\w\<\-]+)(?:\s*):(.+)/)||[],j=g[1],k=g[2];j&&k?m.properties.push({index:j,value:a(k)}):h&&o.push(n(h)),h=""}break;case"{":c++?h+=f:(m=n(h),o.push(m),h="");break;case"}":if(--c)d.push(h+=f);else{for(var E=[],O=0;O<d.length;O++)E=E.concat(i(d[O]));m.children=E,d=[]}h="";break;case"'":p=!0,h+=f;break;case'"':v=!0,h+=f;break;default:h+=f}else h+=f;return o}(y=y.map(function(a,n){return a+="function"==typeof k[n]?/\:(\s+)$/.test(a)?"<<"+n+">>":"<<:"+n+">>;":k[n]||""}).join("")),p,"."),F=x.locals;return function(a,n){var i=document.querySelector("style#"+s);i||((i=document.createElement("style")).id=s,document.head.append(i)),i.appendChild(document.createTextNode(n.replace(h,a)))}(O,x.globals),function(a,n,s){var f=O+"-"+w++,m=F.replace(/animation(-name){0,1}(\s*):(\s*)<<id>>/g,function(a){return a.replace(h,O)}).replace(h,f).replace(c,function(i,m,h){return k[m](a,s||n,{idGlobal:O,idLocal:f})+(h||"")}),p={class:O+" "+f+" "+(a.class||"")};for(var v in a)(j||v in g||"function"==typeof a[v]||d.indexOf(v)>-1)&&(p[v]=a[v]);return i.apply(void 0,[o,p,i("style",{},m)].concat(a.children))}}}}});
//# sourceMappingURL=orby-css.umd.js.map
